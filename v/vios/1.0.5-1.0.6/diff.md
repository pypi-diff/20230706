# Comparing `tmp/vios-1.0.5-py3-none-any.whl.zip` & `tmp/vios-1.0.6-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 33391 bytes, number of entries: 23
--rw-rw-rw-  2.0 fat      781 b- defN 23-Jul-03 01:52 vios/__init__.py
--rw-rw-rw-  2.0 fat     4936 b- defN 23-Jul-03 01:52 vios/collection/__init__.py
--rw-rw-rw-  2.0 fat     3515 b- defN 23-Jun-26 04:44 vios/collection/support.py
--rw-rw-rw-  2.0 fat    11254 b- defN 23-Jun-25 06:45 vios/collection/tasks.py
--rw-rw-rw-  2.0 fat    10198 b- defN 23-Jul-03 01:52 vios/collection/uapi.py
--rw-rw-rw-  2.0 fat     4756 b- defN 23-Jun-20 07:11 vios/driver/VirtualDevice.py
--rw-rw-rw-  2.0 fat     2962 b- defN 23-Jun-20 07:11 vios/driver/__init__.py
--rw-rw-rw-  2.0 fat      209 b- defN 23-Jun-26 03:11 vios/driver/common/__init__.py
--rw-rw-rw-  2.0 fat     4192 b- defN 23-Jul-03 01:52 vios/driver/common/basedriver.py
--rw-rw-rw-  2.0 fat     4666 b- defN 23-Jun-20 07:11 vios/driver/common/quantity.py
--rw-rw-rw-  2.0 fat     5546 b- defN 23-Jun-20 07:11 vios/driver/common/visadriver.py
--rw-rw-rw-  2.0 fat      784 b- defN 23-Jun-25 06:45 vios/envelope/__init__.py
--rw-rw-rw-  2.0 fat    13374 b- defN 23-Jul-03 01:52 vios/envelope/assembler.py
--rw-rw-rw-  2.0 fat    10541 b- defN 23-Jun-26 02:55 vios/envelope/calculator.py
--rw-rw-rw-  2.0 fat     1047 b- defN 23-Jun-20 07:11 vios/envelope/device.py
--rw-rw-rw-  2.0 fat     1719 b- defN 23-Jun-26 04:40 vios/envelope/processor.py
--rw-rw-rw-  2.0 fat     2980 b- defN 23-Jul-03 01:52 vios/envelope/rule.py
--rw-rw-rw-  2.0 fat      522 b- defN 23-Jun-26 05:20 vios/tools/__init__.py
--rw-rw-rw-  2.0 fat     1089 b- defN 23-Jul-03 01:52 vios-1.0.5.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1000 b- defN 23-Jul-03 01:52 vios-1.0.5.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-03 01:52 vios-1.0.5.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        5 b- defN 23-Jul-03 01:52 vios-1.0.5.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1857 b- defN 23-Jul-03 01:52 vios-1.0.5.dist-info/RECORD
-23 files, 88025 bytes uncompressed, 30411 bytes compressed:  65.5%
+Zip file size: 33886 bytes, number of entries: 23
+-rw-rw-rw-  2.0 fat      781 b- defN 23-Jun-26 13:01 vios/__init__.py
+-rw-rw-rw-  2.0 fat     6312 b- defN 23-Jul-04 14:13 vios/collection/__init__.py
+-rw-rw-rw-  2.0 fat     3515 b- defN 23-Jul-04 13:33 vios/collection/support.py
+-rw-rw-rw-  2.0 fat    11254 b- defN 23-Jun-19 15:11 vios/collection/tasks.py
+-rw-rw-rw-  2.0 fat    10198 b- defN 23-Jun-28 07:10 vios/collection/uapi.py
+-rw-rw-rw-  2.0 fat     4756 b- defN 23-Jun-19 15:11 vios/driver/VirtualDevice.py
+-rw-rw-rw-  2.0 fat     2962 b- defN 23-Jun-19 15:11 vios/driver/__init__.py
+-rw-rw-rw-  2.0 fat      209 b- defN 23-Jun-26 11:28 vios/driver/common/__init__.py
+-rw-rw-rw-  2.0 fat     4192 b- defN 23-Jun-28 07:10 vios/driver/common/basedriver.py
+-rw-rw-rw-  2.0 fat     4666 b- defN 23-Jun-19 15:11 vios/driver/common/quantity.py
+-rw-rw-rw-  2.0 fat     5546 b- defN 23-Jun-19 15:11 vios/driver/common/visadriver.py
+-rw-rw-rw-  2.0 fat      784 b- defN 23-Jun-30 06:18 vios/envelope/__init__.py
+-rw-rw-rw-  2.0 fat    13446 b- defN 23-Jul-06 02:54 vios/envelope/assembler.py
+-rw-rw-rw-  2.0 fat    10541 b- defN 23-Jun-26 11:28 vios/envelope/calculator.py
+-rw-rw-rw-  2.0 fat     1047 b- defN 23-Jun-19 15:11 vios/envelope/device.py
+-rw-rw-rw-  2.0 fat     1719 b- defN 23-Jun-26 11:28 vios/envelope/processor.py
+-rw-rw-rw-  2.0 fat     2980 b- defN 23-Jun-26 12:50 vios/envelope/rule.py
+-rw-rw-rw-  2.0 fat      522 b- defN 23-Jun-26 11:28 vios/tools/__init__.py
+-rw-rw-rw-  2.0 fat     1089 b- defN 23-Jul-06 02:54 vios-1.0.6.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1000 b- defN 23-Jul-06 02:54 vios-1.0.6.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-06 02:54 vios-1.0.6.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        5 b- defN 23-Jul-06 02:54 vios-1.0.6.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1857 b- defN 23-Jul-06 02:54 vios-1.0.6.dist-info/RECORD
+23 files, 89473 bytes uncompressed, 30906 bytes compressed:  65.5%
```

## zipnote {}

```diff
@@ -48,23 +48,23 @@
 
 Filename: vios/envelope/rule.py
 Comment: 
 
 Filename: vios/tools/__init__.py
 Comment: 
 
-Filename: vios-1.0.5.dist-info/LICENSE
+Filename: vios-1.0.6.dist-info/LICENSE
 Comment: 
 
-Filename: vios-1.0.5.dist-info/METADATA
+Filename: vios-1.0.6.dist-info/METADATA
 Comment: 
 
-Filename: vios-1.0.5.dist-info/WHEEL
+Filename: vios-1.0.6.dist-info/WHEEL
 Comment: 
 
-Filename: vios-1.0.5.dist-info/top_level.txt
+Filename: vios-1.0.6.dist-info/top_level.txt
 Comment: 
 
-Filename: vios-1.0.5.dist-info/RECORD
+Filename: vios-1.0.6.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## vios/collection/__init__.py

```diff
@@ -8,15 +8,17 @@
 import os
 import time
 from collections import OrderedDict
 from functools import cached_property
 from pathlib import Path
 
 from kernel.sched import JupyterProgressBar, Progress
+from kernel.sched.task import App
 from quark import connect
+from waveforms.scan_iter import scan_iters
 
 from .. import startup
 
 try:
     with open(Path(startup.get('site', '')) /'etc/bootstrap.json', 'r') as f:
         cfg = json.loads(f.read())['executor']
 except Exception as e:
@@ -39,21 +41,23 @@
     >>> task = Task(s21) # s21 为experiment中字典描述
     >>> task.run()
     >>> task.bar() # 适用于notebook
     """
 
     handles = {}
 
-    def __init__(self, task: dict, timeout: float | None = None) -> None:
+    def __init__(self, task: dict | App, timeout: float | None = None) -> None:
         """_summary_
 
         Args:
             task (dict): _description_
             timeout (float | None, optional): _description_. Defaults to None.
         """
+        if isinstance(task, App):
+            task = transform(task)
         self.task = task
         self.timeout = timeout
 
         self.data = {}
         self.meta = {}
         self.index = 0
         self.cmds = {}
@@ -160,7 +164,44 @@
         self.stop(self.taskid)
         bar = JupyterProgressBar(description=self.name)
         bar.listen(self.progress)
         bar.display()
         self.join()
 
 
+def transform(app: App):
+    """转换继承自App的任务为server可执行任务
+
+    Args:
+        app (App): 任务基类
+
+    Returns:
+        dict: 任务描述
+    """
+
+    steps = list(scan_iters(**app.scan_range()))
+
+    circ = []
+    loop = {}
+    for step in steps:
+        circ.append(step.kwds['circuit'])
+        for q in app.qubits:
+            loop.setdefault(q, []).append(step.kwds[q])
+
+    index = []
+    for k, v in loop.items():
+        index.append((k, v, 'au'))
+
+    trigger = s.query('station.triggercmds')[0]
+
+    return dict(metainfo={'name': f'filename:/{app.name}', 'priority': app.task_priority, 'user': 'kernel',
+                          'other': {'shots': app.shots, 'signal': app.signal}},
+
+                taskinfo={'STEP': {'main': ['WRITE', ('index',)],
+                                   'trigger': ['WRITE', 'trig'],
+                                   'READ': ['READ', 'read'],
+                                   },
+                          'CIRQ': iter(circ),
+                          'LOOP': {'index': index,
+                                   'trig': [(trigger, 0, 'any')]
+                                   }
+                          })
```

## vios/envelope/assembler.py

```diff
@@ -1,13 +1,13 @@
 """指令生成及处理
 1、线路编绎，并返回编绎后的结果及相关额外参数
 2、将1得到的结果进行硬件解析，并整合所需参数
 """
 
-
+import os
 from copy import deepcopy
 from typing import Any
 
 import numpy as np
 from lib import stdlib
 from waveforms.namespace import DictDriver
 from waveforms.qlisp import compile as _compile
@@ -51,14 +51,16 @@
     # def reset(self, snapshot):
     #     if isinstance(snapshot, dict):
     #         self.__driver = DictDriver(deepcopy(snapshot))
     #     else:
     #         super().reset(snapshot)
 
     """
+    if isinstance(snapshot, int):
+        return os.getpid()
     cfg.reset(snapshot)
     cfg.initial = kwds.get('initial', {'restore': [('WAIT', 'T', 0.01, 's')]})
     cfg.bypass = kwds.get('bypass', {})
     cfg._keys = kwds.get('keys', [])
     return cfg
 #endregion context
```

## Comparing `vios-1.0.5.dist-info/LICENSE` & `vios-1.0.6.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `vios-1.0.5.dist-info/METADATA` & `vios-1.0.6.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: vios
-Version: 1.0.5
+Version: 1.0.6
 Summary: runtime requirements for systemq
 Author-email: YL <fengyl@baqis.ac.cn>
 Project-URL: homepage, https://gitee.com
 Project-URL: bugs, https://gitee.com
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Intended Audience :: Science/Research
```

## Comparing `vios-1.0.5.dist-info/RECORD` & `vios-1.0.6.dist-info/RECORD`

 * *Files 21% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 vios/__init__.py,sha256=pQ_BUjQ_ZCki4pI_wid9yJbQi_YK2uWG3rixAEbC670,781
-vios/collection/__init__.py,sha256=jVv6Lv-ByJWhXnXT1fSnuz6rCMqSnGCT-Z4NNu9xiH8,4936
+vios/collection/__init__.py,sha256=RytWzptUCjh2nCNazuNTNg0rEe807ntVkw0ukkRzTKU,6312
 vios/collection/support.py,sha256=78G1G0vyDInEfW4j4RGdt7uM8gt_M3_Ucm_3_zm7jB0,3515
 vios/collection/tasks.py,sha256=FUAGla2yjy4apdM5PLZ7yJP0YsbMajat1gm8bt7y7QI,11254
 vios/collection/uapi.py,sha256=bmjnw6XokSU-0Zkt7XTldjAY0kF48RbHuFVVnE-EkSI,10198
 vios/driver/VirtualDevice.py,sha256=sf87LAcRvJIVZW-OyP8Hw-CWu7isonbr2-TjFGZHYSk,4756
 vios/driver/__init__.py,sha256=rvTlhtDHO_l1rHNsgb3PA9LnEirl4TIm0bvlgRseRnY,2962
 vios/driver/common/__init__.py,sha256=rwnAg6V2hY1vinIHlvGwKTXn34SRQHX8bnIleycTM6k,209
 vios/driver/common/basedriver.py,sha256=jQ3svU_t1v0Zt8lRX8ij8MhwilmIwziozwuTFeRxRnE,4192
 vios/driver/common/quantity.py,sha256=70feNhld2lF04KHQ3zWDliS_cmD1q97Yi0oFqlwYijs,4666
 vios/driver/common/visadriver.py,sha256=WY6TqGmow_K5ePAYIYkG12IxjHfAczuxYTvPk4VmVG4,5546
 vios/envelope/__init__.py,sha256=97kXED9oaUd56J2OoVCTQpctkQZDcAZWxpEQakTxCRM,784
-vios/envelope/assembler.py,sha256=boQiOrQHX1shHhb060N7vBSemmadrLPW3QB8TDBrYvI,13374
+vios/envelope/assembler.py,sha256=KE4Fcrid5UfBsbpOPz7eV2WJY1f7jXwVY0VtjwMvPBk,13446
 vios/envelope/calculator.py,sha256=eE7730YFzArrukuDh0dI0JabG2PiEz3eo3N4Czqgk88,10541
 vios/envelope/device.py,sha256=rQeLe_Y9MTwLZfJsSK9MhvZxdOnrtJNcOZriS6Rm1Io,1047
 vios/envelope/processor.py,sha256=4py3AwLurBTrhXXJCvdfHrMeKGzOFl-gICQTNjpoyQM,1719
 vios/envelope/rule.py,sha256=ANiUVCtozVP6B6m8En55VLqOHWdeMkuA7KqiAiFyAnQ,2980
 vios/tools/__init__.py,sha256=vq-1N9Zjm_ZYcD9_lwX9fKlcMT9Rx7Kd3BDRqmKhMT0,522
-vios-1.0.5.dist-info/LICENSE,sha256=N0ypn_97IUjlPVBH8az2Wt02D-9ROQafRq1D6tcqorE,1089
-vios-1.0.5.dist-info/METADATA,sha256=tOPAtuRc5SqIg41eywDDq31oLlJqFgN2KsxdcUp6Lbk,1000
-vios-1.0.5.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-vios-1.0.5.dist-info/top_level.txt,sha256=4DHqoaYuzp4X6-_w1r1lk0039QUzXe7OVi76KeUqjZM,5
-vios-1.0.5.dist-info/RECORD,,
+vios-1.0.6.dist-info/LICENSE,sha256=N0ypn_97IUjlPVBH8az2Wt02D-9ROQafRq1D6tcqorE,1089
+vios-1.0.6.dist-info/METADATA,sha256=eVvyxS1pueldYAXk_2oqgPbsmS_PUdNh5fR5onA4QU4,1000
+vios-1.0.6.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+vios-1.0.6.dist-info/top_level.txt,sha256=4DHqoaYuzp4X6-_w1r1lk0039QUzXe7OVi76KeUqjZM,5
+vios-1.0.6.dist-info/RECORD,,
```

